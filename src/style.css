:root {
    --primary-pink: #d6336c;
    /* Slightly darker for contrast on white */
    --secondary-pink: #ff8787;
    --accent-gold: #fcc419;
    --bg-light: #fff0f6;
    /* Very light pinkish white */
    --glass: rgba(255, 255, 255, 0.7);
    /* More opaque white for light theme */
    --glass-border: rgba(255, 255, 255, 0.5);
    --text-color: #495057;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Outfit', sans-serif;
    background: linear-gradient(135deg, #fff0f6 0%, #fff5f5 100%);
    color: var(--text-color);
    min-height: 100vh;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
}

#app {
    width: 100%;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.screen {
    position: absolute;
    width: 90%;
    max-width: 500px;
    background: var(--glass);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 30px;
    padding: 40px;
    text-align: center;
    box-shadow: 0 8px 32px 0 rgba(230, 200, 200, 0.37);
    /* Lighter shadow */
    transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    opacity: 0;
    transform: translateY(50px) scale(0.9);
    pointer-events: none;
}

.screen.active {
    opacity: 1;
    transform: translateY(0) scale(1);
    pointer-events: all;
}

h1 {
    font-family: 'Dancing Script', cursive;
    font-size: 3rem;
    margin-bottom: 20px;
    background: linear-gradient(to right, #ff4d6d, #ff758f, #ffb703);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: shine 3s infinite linear;
}

@keyframes shine {
    0% {
        filter: hue-rotate(0deg);
    }

    100% {
        filter: hue-rotate(360deg);
    }
}

.question-img {
    width: 150px;
    height: auto;
    margin-bottom: 20px;
    filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
}

p {
    font-size: 1.2rem;
    margin-bottom: 30px;
    line-height: 1.6;
}

.btn-container {
    display: flex;
    gap: 20px;
    justify-content: center;
}

button {
    padding: 12px 30px;
    border-radius: 50px;
    border: none;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
}

.btn-yes {
    background: linear-gradient(45deg, var(--primary-pink), var(--secondary-pink));
    color: white;
    box-shadow: 0 4px 15px rgba(255, 77, 109, 0.4);
}

.btn-no {
    background: white;
    color: var(--primary-pink);
    border: 2px solid var(--primary-pink);
}

button:hover {
    transform: scale(1.05);
}

button:active {
    transform: scale(0.95);
}

/* Floating Hearts Background */
.heart-bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    pointer-events: none;
}


/* Falling Leaves and Petals */
.falling-element {
    position: fixed;
    top: -10%;
    z-index: 0;
    /* Behind content but visible */
    pointer-events: none;
    animation-name: fall-sway;
    animation-timing-function: ease-in-out;
    animation-iteration-count: infinite;
}

@keyframes fall-sway {
    0% {
        transform: translateY(-10vh) translateX(0) rotate(0deg);
        opacity: 0;
    }

    10% {
        opacity: 1;
    }

    50% {
        transform: translateY(50vh) translateX(50px) rotate(180deg);
    }

    100% {
        transform: translateY(110vh) translateX(-20px) rotate(360deg);
        opacity: 0;
    }
}

@keyframes burst-out {
    0% {
        transform: scale(0.5);
        opacity: 1;
    }

    100% {
        transform: translate(var(--tx), var(--ty)) scale(1) rotate(var(--r));
        opacity: 0;
    }
}

.burst-particle {
    position: fixed;
    pointer-events: none;
    z-index: 9999;
    width: 20px;
    height: auto;
    animation: burst-out 0.8s ease-out forwards;
}

/* Ring Screen specific */
.canvas-container {
    width: 100%;
    height: 400px;
    position: relative;
    overflow: hidden;
    border-radius: 20px;
    margin-top: 20px;
}

.hand-image {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: auto;
    height: 100%;
    object-fit: contain;
    opacity: 0.9;
    filter: drop-shadow(0 0 20px rgba(255, 77, 109, 0.4));
    transition: all 2s ease-in-out;
}

.ring-overlay {
    position: absolute;
    top: -100px;
    left: 45%;
    width: 60px;
    transform: translate(-50%, -50%) scale(2) rotate(-20deg);
    pointer-events: none;
    opacity: 0;
    transition: all 4s cubic-bezier(0.34, 1.56, 0.64, 1);
    z-index: 10;
}

.ring-overlay img {
    width: 100%;
    filter: drop-shadow(0 0 5px gold);
    animation: ring-sparkle 3s infinite linear;
}

.ring-overlay.animate {
    top: 64.5%;
    left: 45.3%;
    opacity: 1;
    transform: translate(-50%, -50%) scale(0.58) rotate(-15deg);
}

@keyframes ring-sparkle {

    0%,
    100% {
        filter: drop-shadow(0 0 5px gold) brightness(1);
    }

    50% {
        filter: drop-shadow(0 0 15px white) brightness(1.3);
    }
}

#final-container::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* Removed dark gradient */
    pointer-events: none;
}

.popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    background: white;
    padding: 30px;
    border-radius: 20px;
    border: 2px solid var(--primary-pink);
    z-index: 1000;
    display: none;
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--primary-pink);
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
    pointer-events: none;
}

.popup.active {
    display: block;
    animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

@keyframes popIn {
    0% {
        transform: translate(-50%, -50%) scale(0);
    }

    100% {
        transform: translate(-50%, -50%) scale(1);
    }
}

.confetti {
    position: fixed;
    top: -10px;
    z-index: 999;
    animation: confetti-fall linear forwards;
}

@keyframes confetti-fall {
    0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
    }

    100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
    }
}

/* Memory Gallery Screen */
.gallery-container {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 400px;
    margin: 40px 0;
    position: relative;
    width: 100%;
    background: radial-gradient(circle, rgba(255, 77, 109, 0.1) 0%, transparent 70%);
}

.polaroid {
    position: absolute;
    background: white;
    padding: 12px 12px 45px 12px;
    box-shadow: 0 15px 55px rgba(0, 0, 0, 0.85);
    border-radius: 4px;
    transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
    cursor: pointer;
    transform: rotate(calc(var(--i) * 12deg - 12deg)) translate(calc(var(--i) * 50px - 50px));
    z-index: var(--i);
    animation: floatPhoto 6s ease-in-out infinite;
    animation-delay: calc(var(--i) * 0.5s);
}

.polaroid img {
    width: 220px;
    height: 300px;
    object-fit: cover;
    border-radius: 2px;
}

.polaroid .caption {
    font-family: 'Dancing Script', cursive;
    color: #333;
    font-size: 1.5rem;
    margin-top: 15px;
    text-align: center;
}

.polaroid:hover {
    transform: scale(1.15) rotate(0deg) translate(0) !important;
    z-index: 500;
    box-shadow: 0 30px 70px rgba(255, 77, 109, 0.6);
    animation-play-state: paused;
}

@keyframes floatPhoto {

    0%,
    100% {
        transform: translateY(0) rotate(calc(var(--i) * 12deg - 12deg)) translate(calc(var(--i) * 50px - 50px));
    }

    50% {
        transform: translateY(-30px) rotate(calc(var(--i) * 4deg)) translate(calc(var(--i) * 25px - 25px));
    }
}

.gallery-btn {
    margin-top: 20px;
}

.final-prompt {
    background: rgba(255, 77, 109, 0.1);
    padding: 30px;
    border-radius: 20px;
    border: 1px solid var(--glass-border);
    margin-bottom: 20px;
    animation: fadeInPrompt 0.5s ease-out;
}

.final-prompt p {
    font-size: 1.5rem;
    color: var(--text-color);
    margin-bottom: 15px;
}

@keyframes fadeInPrompt {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Mobile Responsive Adjustments */
@media screen and (max-width: 768px) {
    .screen {
        width: 95%;
        padding: 25px 15px;
        max-width: 100%;
        border-radius: 15px;
    }

    h1 {
        font-size: 2rem;
    }

    p {
        font-size: 1rem;
        margin-bottom: 20px;
    }

    /* Adjust Gallery for Mobile */
    .gallery-container {
        height: 350px;
    }

    .polaroid {
        padding: 8px 8px 30px 8px;
        transform: rotate(calc(var(--i) * 5deg - 5deg)) translate(calc(var(--i) * 15px - 15px));
    }

    .polaroid img {
        width: 140px;
        height: 190px;
    }

    .polaroid .caption {
        font-size: 1rem;
    }

    /* Tweaked float animation for tighter space */
    @keyframes floatPhoto {

        0%,
        100% {
            transform: translateY(0) rotate(calc(var(--i) * 5deg - 5deg)) translate(calc(var(--i) * 15px - 15px));
        }

        50% {
            transform: translateY(-15px) rotate(calc(var(--i) * 2deg)) translate(calc(var(--i) * 10px - 10px));
        }
    }
}

@media screen and (max-width: 600px) {
    .canvas-container {
        height: 300px;
    }

    /* Hand Image Logic:
       On mobile, stick to 'contain' to ensure full hand is visible.
       'cover' might crop fingers.
       But we need to ensure the ring lands correctly.
       If the ring is "not fitting", it implies alignment issues.
       We'll slightly adjust position.
    */
    .hand-image {
        width: 100%;
        height: 100%;
        object-fit: contain;
    }

    /* 
       Ring adjustment:
       If the hand scales down while maintaining aspect ratio,
       the percentage based positioning should ideally work relative to the container IF the container matches expected aspect ratio.
       Since we don't know the exact ratio, we'll try to center it and scale it down more.
    */
    .ring-overlay.animate {
        /* Adjusted coordinates for typical mobile view: Moved right for ring finger */
        top: 61% !important;
        left: 58% !important;
        transform: translate(-50%, -50%) scale(0.35) rotate(-15deg) !important;
    }

    .final-prompt p {
        font-size: 1.2rem;
    }

    .btn-container button {
        padding: 10px 20px;
        font-size: 1rem;
    }
}